{% load static %}
{% include 'dating/navbar.html' %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html lang="en">
  <head>
        
            
    <title>Home</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="{% static '/images/love.png'  %}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="icon" href="{% static '/images/love.png'  %}">
    <link id="mystylesheet" rel="stylesheet" type="text/css" href="{% static '/css/lighthome.css'%}">

    {% if request.user.profile.value == 'lightprof.css'%}


     <link id="mystylesheet" rel="stylesheet" type="text/css" href="{% static '/css/lighthome.css'%}">
    


    {% elif request.user.profile.value == 'darkprof.css'   %}

     <link id="mystylesheet" rel="stylesheet" type="text/css" href="{% static '/css/darkhome.css'%}">
    {% endif %}



     


   

    

    
  </head>

  <body style="font-family: 'Montserrat', sans-serif">

    <div class="container">


      <!-- <button class="btn btn-light" onclick="swapStyles('lighthome.css');">Light  Mode</button>
      <button class="btn btn-dark" onclick="swapStyles('darkhome.css');">Dark Mode</button> -->
     
      {% if messages %}
    
        {% for msg in messages %}       
        
          <div class="alert alert-{{msg.level_tag}}" role="alert">
          {{msg.message}}
          </div>
        
        {% endfor %}
        
      {% endif %}
      <!-- <button class="btn btn-light btn-block"  onclick="swapStyles('lighthome.css');">Light Mode</button>
        <button class="btn btn-dark btn-block" onclick="swapStyles('darkhome.css');">Dark Mode</button>
 -->      
      <div class="row align-items-center justify-content-center">
        
        <div class="card" style="width: 18rem; top: 30px;">
          <img src="{{ profiles.profile_pic.url }}" class="card-img-top" alt="{{profiles.user.username}}">
          <div class="card-body">
            

            <h5 class="card-title" style="color: #FF416C; font-family: 'Montserrat', sans-serif ">{{profiles.user.username}}</h5>
            <h6 class="card-text" style="font-family: 'Montserrat', sans-serif"> {{profiles.gender}} </h6>
            {%if profiles.age is None%}
              <h6 class="card-text" style="font-family: 'Montserrat', sans-serif"> </h6>

            {% else %}
              <h6 class="card-text" style="font-family: 'Montserrat', sans-serif"> {{profiles.age}} </h6>


            {%endif%}
            
            <h6 class="card-text" style="font-family: 'Montserrat', sans-serif"> {{profiles.state}} {{profiles.country}} </h6>
            <h6 style="font-weight: 430; font-family: 'Montserrat', sans-serif">{{profiles.bio}} </h6>

           <br>
            
            <a href="messages/{{profiles.user.username}}/" style=" color: white; text-decoration: none; outline: none;">
              <button class="btn btn-default my-2 my-sm-0" type="submit" style=" color: white; ">Message</button>
            </a>
          </div>
        </div>
      </div>
  	  <br>
      <br>
    
        
       <a href="{% url 'home' %}" style=" color: white; text-decoration: none; outline: none;">
          <br>
          <button class="btn btn-default  btn-block"style=" color: white;">Generate random</button>
       </a>
       <br>
      <form method="get">
        {% csrf_token %}
        
        

        <h4>Filter </h4>
        <hr style="background-color: #eaeaeaea;">
        <h5 style="font-size: 18px;">Age: </h5>

        {{ filform.age|as_crispy_field }}

        <h5 style="font-size: 18px;">Gender: </h5>
        
        {{ filform.gender|as_crispy_field }}

        <h5 style="font-size: 18px;">State: </h5>
        
        {{ filform.state|as_crispy_field }}

        <h5 style="font-size: 18px;">Country: </h5>
        
        {{ filform.country|as_crispy_field }}

       
       <br>
       <button type ="submit" class="btn btn-default btn-block " style=" color: white;">Search</button>
      </form>
      <br>
      <!-- <img src="{% static 'images/love.png'  %}" width="40" height="30" class="d-inline-block align-top" alt="" style="padding-right: 10px;"><i>Keep clicking on search to get new results based on your filter.  If they are no results, change your filter and search again.</i>
      <br> -->
      <small style="color: #FF416C;">Keep clicking on search to get new results based on your filter.  If they are no results, change your filter and search again.</small>
      <br>
      <br>
      <br>



      <!-- <footer>
        
        <p style="text-align: center; font-size: 20px;">
          Created by <i style="font-size: 20px;"> Dummyware</i>
            
        </p>

      </footer> -->
    </div>

   <script type="text/javascript">

    // var settheme = localStorage.getItem('theme')
    // console.log('theme:',settheme)
 
    

    // var cssFile = "{% static '/css' %}"
    
    // function swapStyles(sheet){

    //   document.getElementById('mystylesheet').href = cssFile + '/' + sheet
    //   localStorage.setItem('theme', sheet)



    // }

    // if (settheme == 'lighthome.css' || null){
    //   swapStyles('lighthome.css')
    // }else{
    //   swapStyles(settheme)
    // }

      

    // function getcookie(name){
    //   var cookievalue = null;
    //   if(document.cookie && document.cookie !== ''){
    //     var cookies = document.cookie.split(';');
    //     for (var i = 0; i < cookies.length; i++ ){
    //       var cookie = cookies[i].trim();

    //       if(cookie.substring(0, name.length + 1) === (name + '=')){
    //         cookievalue =  decodeURIComponent(cookie.substring(name.length + 1));
    //         break;   
    //       }
    //     }
    //   }

    //   return cookievalue;

    // }

    // var csrftoken = getcookie('csrftoken');

    // var cssFile = "{% static '/css' %}"


    // function swapStyles(sheet){
    //   document.getElementById('mystylesheet').href = cssFile + '/' + sheet
    //   localStorage.setItem('theme', sheet)  
    //   updatetheme(sheet)    

    // }


    // function localsettings(){


    //   var url = "{% url 'user_settings' %}"

    //   fetch(url, {
    //     method:'GET',
    //     headers : {
    //       'Content-type':'application/json'
    //     }
    //   })
    //   .then((response) => response.json())
    //   .then (function(data){

    //     console.log('theme:',data)

    //     var theme = data.value;

    //     if (theme == 'lighthome.css' || null){
    //       swapStyles('lighthome.css')
    //     }else{
    //       swapStyles('darkhome.css')
    //     }
    //   })   
    // }

    // localsettings()

    // function updatetheme(theme){
    //   var url ="{%  url 'update_theme' %}"
    //   fetch(url,{
    //     method:'POST',
    //     headers:{
    //       'content-type':'application/json',
    //       'X-CSRFToken' : csrftoken,
    //     },
    //     body:JSON.stringify({'theme':theme})

    //   })
      
    // }

   </script>

    

  </body>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
</html>